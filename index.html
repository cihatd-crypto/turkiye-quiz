<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>KPSS Genel KÃ¼ltÃ¼r Deneme SÄ±navÄ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f8; padding: 20px; transition: 0.3s; }
    body.dark { background:#121212; color:#eee; }
    .quiz-box { max-width:700px; margin:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,.1); }
    body.dark .quiz-box { background:#1e1e1e; }
    h2 { margin-bottom:10px; }
    .top-bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .timer { font-weight:bold; }
    .option { padding:12px; margin-bottom:10px; background:#e9ecef; border-radius:6px; cursor:pointer; }
    body.dark .option { background:#2a2a2a; }
    .option.correct { background:#9be7a1; }
    .option.wrong { background:#f3a6a6; }
    .option.disabled { pointer-events:none; }
    .result { text-align:center; font-size:20px; }
    button { padding:8px 12px; border:none; border-radius:6px; cursor:pointer; }
    .share { margin-top:15px; }
    textarea { width:100%; height:120px; margin-top:10px; }
  </style>
</head>
<body>

<div class="quiz-box" id="quiz">
  <div class="top-bar">
    <div class="timer" id="timer">SÃ¼re: 15</div>
    <button onclick="toggleDark()">ðŸŒ™</button>
  </div>
  <h2 id="question"></h2>
  <div id="options"></div>
</div>

<script>
let questions = [
  { q: "TÃ¼rkiye Cumhuriyeti'nin baÅŸkenti neresidir?", options: ["Ä°stanbul","Ankara","Ä°zmir","Bursa"], answer: 1 },
  { q: "TÃ¼rkiye BÃ¼yÃ¼k Millet Meclisi hangi yÄ±l aÃ§Ä±lmÄ±ÅŸtÄ±r?", options: ["1919","1920","1921","1923"], answer: 1 },
  { q: "TÃ¼rkiye'nin en uzun nehri hangisidir?", options: ["FÄ±rat","Dicle","KÄ±zÄ±lÄ±rmak","Sakarya"], answer: 2 },
  { q: "AtatÃ¼rk'Ã¼n doÄŸduÄŸu ÅŸehir neresidir?", options: ["Selanik","Ä°stanbul","ManastÄ±r","Sofya"], answer: 0 },
  { q: "Lozan AntlaÅŸmasÄ± hangi yÄ±l imzalanmÄ±ÅŸtÄ±r?", options: ["1920","1921","1922","1923"], answer: 3 }
];

let current = 0;
let score = 0;
let time = 15;
let timerInterval;
let wrongList = [];

const qEl = document.getElementById("question");
const oEl = document.getElementById("options");
const tEl = document.getElementById("timer");
const quiz = document.getElementById("quiz");

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
}

function startTimer(){
  clearInterval(timerInterval);
  time = 15;
  tEl.textContent = "SÃ¼re: " + time;
  timerInterval = setInterval(()=>{
    time--;
    tEl.textContent = "SÃ¼re: " + time;
    if(time === 0){
      reveal(-1);
    }
  },1000);
}

function load(){
  if(current >= questions.length){
    finish();
    return;
  }
  startTimer();
  const q = questions[current];
  qEl.textContent = (current+1) + ". " + q.q;
  oEl.innerHTML = "";
  q.options.forEach((opt,i)=>{
    const d = document.createElement("div");
    d.className = "option";
    d.textContent = opt;
    d.onclick = ()=>reveal(i);
    oEl.appendChild(d);
  });
}

function reveal(sel){
  clearInterval(timerInterval);
  const q = questions[current];
  const ops = document.querySelectorAll(".option");
  ops.forEach((d,i)=>{
    d.classList.add("disabled");
    if(i === q.answer) d.classList.add("correct");
    if(i === sel && i !== q.answer) d.classList.add("wrong");
  });
  if(sel === q.answer) score++;
  else wrongList.push(q.q);
  setTimeout(()=>{
    current++;
    load();
  },1200);
}

function finish(){
  shuffle(questions);
  let puan = Math.round((score/questions.length)*100);
  quiz.innerHTML = `
    <div class="result">
      ðŸŽ‰ Deneme Bitti<br><br>
      DoÄŸru: ${score}<br>
      YanlÄ±ÅŸ: ${questions.length-score}<br>
      Puan: <b>${puan}</b><br><br>
      <b>YanlÄ±ÅŸ Sorular:</b><br>
      ${wrongList.join("<br>") || "Yok"}
    </div>
  `;
}

function toggleDark(){
  document.body.classList.toggle("dark");
}

shuffle(questions);
load();
</script>


let current=0, score=0, time=15, timerInterval;
let wrongList=[];

const qEl=document.getElementById('question');
const oEl=document.getElementById('options');
const tEl=document.getElementById('timer');
const quiz=document.getElementById('quiz');

function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}}

function startTimer(){clearInterval(timerInterval);time=15;tEl.textContent='SÃ¼re: '+time;timerInterval=setInterval(()=>{time--;tEl.textContent='SÃ¼re: '+time;if(time===0){reveal(-1)}},1000)}

function load(){if(current>=questions.length){finish();return;}startTimer();const q=questions[current];qEl.textContent=(current+1)+'. '+q.q;oEl.innerHTML='';q.options.forEach((op,i)=>{const d=document.createElement('div');d.className='option';d.textContent=op;d.onclick=()=>reveal(i);oEl.appendChild(d)})}

function reveal(sel){clearInterval(timerInterval);const q=questions[current];const ops=document.querySelectorAll('.option');ops.forEach((d,i)=>{d.classList.add('disabled');if(i===q.answer)d.classList.add('correct');if(i===sel&&i!==q.answer)d.classList.add('wrong')});if(sel===q.answer)score++;else wrongList.push(q.q);setTimeout(()=>{current++;load()},1200)}

function finish(){shuffle(questions);let puan=Math.round((score/questions.length)*100);
quiz.innerHTML=`<div class='result'>ðŸŽ‰ Deneme Bitti<br><br>DoÄŸru: ${score}<br>YanlÄ±ÅŸ: ${questions.length-score}<br>Puan: <b>${puan}</b><br><br><b>YanlÄ±ÅŸ Sorular:</b><br>${wrongList.join('<br>')||'Yok'}
<div class='share'><button onclick="navigator.share?navigator.share({title:'KPSS Quiz',text:'PuanÄ±m: ${puan}',url:location.href}):alert('PaylaÅŸÄ±m desteklenmiyor')">ðŸ“¤ PaylaÅŸ</button></div>
<hr>
<b>Admin Panel (Soru Ekle)</b><textarea id='admin'></textarea><br><button onclick='saveQuestions()'>Kaydet</button>
</div>`}

function saveQuestions(){try{let arr=JSON.parse(document.getElementById('admin').value);localStorage.setItem('kpssQuestions',JSON.stringify(arr));alert('Sorular kaydedildi, sayfayÄ± yenile');}catch(e){alert('JSON hatalÄ±')}}

function toggleDark(){document.body.classList.toggle('dark')}

shuffle(questions);load();
</script>
</body>
</html>
